"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.json = void 0;
var ts = require("typescript");
var ast_1 = require("../../utils/ast");
var renderNodes_1 = require("../../components/codegen/renderNodes");
/**
 * Object.keys support
 *
 * @param node
 * @param context
 */
var json = function (node, context) {
    var toCheck = node.expression.kind === ts.SyntaxKind.PropertyAccessExpression &&
        node.expression.expression.getText() === 'JSON' &&
        ['parse', 'stringify'].includes(node.expression.name.getText());
    if (toCheck) {
        var method = node.expression.name.getText();
        var varName = renderNodes_1.renderNode(ast_1.getCallExpressionArg(node), context);
        if (method === 'stringify') {
            return "json_encode(" + varName + ")";
        }
        if (method === 'parse') {
            return "json_decode(" + varName + ", true)";
        }
    }
};
exports.json = json;
